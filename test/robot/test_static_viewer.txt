
*** Settings ***

Library           Selenium2Library



*** Test Cases ***

Test Static Viewer
    Open Browser                        http://localhost:4080/webtest/static_example/       Chrome

    # We have 2 viewports to load with small images
    Wait Until Page Contains Element    id=viewport-img
    Wait Until Page Contains Element    id=viewport2-img

    # Check that zooming in on viewport1 doesn't zoom viewport2
    # See https://github.com/openmicroscopy/openmicroscopy/pull/4701
    ${viewport2x}=                      Get Horizontal Position             id=viewport2-img
    Click Element                       xpath=//span[@class='wb_zoomIn']
    ${viewport2xZoom}=                  Get Horizontal Position             id=viewport2-img
    Should Be Equal                     ${viewport2x}                       ${viewport2xZoom}

    # Load a big image
    Click Element                       id=bigimageThumb
    Wait Until Page Contains Element    id=viewport-img-tiles

    # Loading small image again should remove tiled viewer
    # See https://github.com/openmicroscopy/openmicroscopy/pull/4695/
    Click Element                       id=smallimageThumb
    Wait Until Keyword Succeeds         5    1    Page Should Not Contain Element     id=viewport-img-tiles
    Click Element                       xpath=//span[@class='wb_zoomIn']


    Close All Browsers
